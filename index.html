<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estudio Etno-Ecol√≥gico de Nichos en Douyin 2026</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js" crossorigin="anonymous"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background-color: #0a0a0a; color: #ffffff; line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { text-align: center; padding: 40px 0; border-bottom: 1px solid #333; }
        .logo { margin-bottom: 20px; }
        .logo img { height: 120px; filter: drop-shadow(0 0 15px #00ffcc); }
        .logo span { font-size: 24px; color: #888; display: block; margin-top: 5px; }
        .title { font-size: 32px; font-weight: bold; margin: 20px 0; text-transform: uppercase; letter-spacing: 2px; }
        .title small { font-size: 18px; color: #aaa; display: block; text-transform: none; letter-spacing: normal; margin-top: 10px; }
        .nav { display: flex; justify-content: center; gap: 20px; margin: 30px 0; flex-wrap: wrap; }
        .nav-item { background: #1a1a1a; padding: 12px 24px; border-radius: 30px; cursor: pointer; transition: all 0.3s; border: 1px solid #333; }
        .nav-item:hover, .nav-item.active { background: #00ffcc; color: #000; border-color: #00ffcc; }
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 40px 0; }
        .stat-card { background: #1a1a1a; padding: 20px; border-radius: 10px; text-align: center; border: 1px solid #333; }
        .stat-number { font-size: 36px; font-weight: bold; color: #00ffcc; }
        .stat-label { color: #888; margin-top: 5px; }
        .section { display: none; margin: 40px 0; }
        .section.active { display: block; }
        .section-title { font-size: 24px; margin-bottom: 10px; color: #00ffcc; border-left: 4px solid #00ffcc; padding-left: 15px; }
        .section-subtitle { font-size: 14px; color: #888; margin-bottom: 20px; padding-left: 15px; font-style: italic; }
        .table-responsive { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; background: #1a1a1a; border-radius: 10px; overflow: hidden; }
        th { background: #00ffcc; color: #000; padding: 12px; text-align: left; font-weight: bold; }
        td { padding: 12px; border-bottom: 1px solid #333; }
        tr:hover { background: #252525; }
        .gallery { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin: 20px 0; }
        .card { background: #1a1a1a; border-radius: 10px; overflow: hidden; border: 1px solid #333; transition: transform 0.3s, border-color 0.3s; aspect-ratio: 3/4; width: 100%; cursor: pointer; }
        .card:hover { transform: scale(1.02); border-color: #00ffcc; }
        .card-img { width: 100%; height: 100%; object-fit: cover; display: block; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.95); z-index: 1000; cursor: pointer; }
        .close-modal { position: absolute; top: 20px; right: 30px; color: #fff; font-size: 40px; cursor: pointer; z-index: 1001; }
        .modal-content { position: relative; width: 90%; height: 90%; margin: auto; overflow-y: auto; display: flex; justify-content: center; background: #1a1a1a; border-radius: 10px; padding: 20px; cursor: default; }
        .modal-content img { width: auto; height: auto; max-width: 100%; max-height: none; object-fit: contain; border-radius: 5px; }
        .btn { background: transparent; border: 2px solid #00ffcc; color: #00ffcc; padding: 12px 30px; border-radius: 30px; cursor: pointer; transition: all 0.3s; font-size: 16px; font-weight: bold; }
        .btn:hover { background: #00ffcc; color: #000; }
        .footer { text-align: center; padding: 40px 0; border-top: 1px solid #333; margin-top: 40px; color: #888; }
        #chinaMap { width: 100%; height: 600px !important; min-height: 500px; background: #1a1a1a; border-radius: 10px; }
        #barChart { width: 100% !important; height: 500px !important; min-height: 400px !important; background: #1a1a1a; border-radius: 10px; display: block !important; visibility: visible !important; }
        .metodologia-container { background: #1a1a1a; padding: 30px; border-radius: 10px; width: 100%; }
        .metodologia-texto { margin: 20px 0; line-height: 1.8; font-size: 16px; color: #ddd; }
        @media (max-width: 768px) {
            .title { font-size: 24px; }
            .logo img { height: 80px; }
            .gallery { grid-template-columns: repeat(2, 1fr); gap: 10px; }
            #chinaMap, #barChart { height: 400px !important; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">
                <img src="https://raw.githubusercontent.com/dicarlophotoart-blip/estudio-douyin-2026/main/unnamed.png" alt="Douyin" style="height: 120px; filter: drop-shadow(0 0 15px #00ffcc);">
                <span>ÊäñÈü≥</span>
            </div>
            <div class="title">ESTUDIO ETNO-ECOL√ìGICO DE NICHOS EN DOUYIN 2026<small>Juan Carlos Delgado</small></div>
        </div>
        <div class="stats">
            <div class="stat-card"><div class="stat-number" id="total-fichas">0</div><div class="stat-label">Creadoras</div></div>
            <div class="stat-card"><div class="stat-number" id="max-seguidores">0</div><div class="stat-label">M√°x seguidores</div></div>
            <div class="stat-card"><div class="stat-number" id="max-ratio">0</div><div class="stat-label">M√°x ratio</div></div>
            <div class="stat-card"><div class="stat-number" id="total-regiones">0</div><div class="stat-label">Regiones</div></div>
        </div>
        <div class="nav">
            <div class="nav-item active" onclick="showSection('lista')">üìã LISTA</div>
            <div class="nav-item" onclick="showSection('galeria')">üñºÔ∏è GALER√çA</div>
            <div class="nav-item" onclick="showSection('ranking')">üìä RANKING</div>
            <div class="nav-item" onclick="showSection('mapa')">üó∫Ô∏è MAPA</div>
            <div class="nav-item" onclick="showSection('metodologia')">üìö M√âTODO</div>
        </div>
        <div id="lista" class="section active">
            <h2 class="section-title">üìã LISTA MAESTRA</h2>
            <p class="section-subtitle">"Cada creadora es un dato en el ecosistema Douyin"</p>
            <div class="table-responsive">
                <table>
                    <thead><tr><th>Nombre</th><th>Seguidores</th><th>Likes</th><th>Ratio</th><th>Origen</th><th>Nicho</th></tr></thead>
                    <tbody id="tabla-body"></tbody>
                </table>
            </div>
        </div>
        <div id="galeria" class="section">
            <h2 class="section-title">üñºÔ∏è GALER√çA</h2>
            <p class="section-subtitle">"Cada creadora es un portal a un nicho cultural"</p>
            <div class="gallery" id="galeria-cards"></div>
        </div>
        <div id="ranking" class="section">
            <h2 class="section-title">üìä TOP 10 POR ENGAGEMENT</h2>
            <p class="section-subtitle">"El engagement revela qu√© resuena en la cultura china"</p>
            <div id="barChart" style="width: 100%; height: 500px; min-height: 400px; background: #1a1a1a; border-radius: 10px;"></div>
            <p style="text-align: center; margin-top: 15px; color: #888; font-size: 13px;">Ratio = Likes √∑ Seguidores (M) ‚Ä¢ Mayor ratio = m√°s interacci√≥n por seguidor</p>
        </div>
        <div id="mapa" class="section">
            <h2 class="section-title">üó∫Ô∏è MAPA</h2>
            <p class="section-subtitle">"Cada punto es una ventana a una realidad china"</p>
            <div id="chinaMap"></div>
            <p style="text-align: center; margin-top: 20px; color: #888; font-size: 14px;">* Taiw√°n es una parte inalienable del territorio de China.</p>
        </div>
        <div id="metodologia" class="section">
            <h2 class="section-title">üìö METODOLOG√çA</h2>
            <p class="section-subtitle">"Observamos proyecciones, no juzgamos identidades"</p>
            <div class="metodologia-container">
                <p class="metodologia-texto">Soy bi√≥logo de formaci√≥n. Pero hace m√°s de 10 a√±os que mi objeto de estudio cambi√≥.</p>
                <p class="metodologia-texto">Administro un grupo con m√°s de 30,500 personas interesadas en la civilizaci√≥n china, su ciencia, su ingenier√≠a y su cultura.</p>
                <p class="metodologia-texto">Hablo a diario con chinos en WeChat. He escrito art√≠culos sobre China que circulan en mi comunidad.</p>
                <p class="metodologia-texto">Llevo m√°s de una d√©cada observando, documentando y conversando.</p>
                <p class="metodologia-texto" style="margin-top: 30px;"><strong>Criterios de selecci√≥n:</strong><br>‚Ä¢ Atracci√≥n est√©tica personal del investigador<br>‚Ä¢ Talento destacado en disciplinas como baile, wushu, fitness, arte, cocina, viajes</p>
                <p class="metodologia-texto"><strong>Nota sobre criterios est√©ticos:</strong><br>Mi apreciaci√≥n de la belleza no se limita a c√°nones occidentales. Conozco y aprecio la diversidad est√©tica china.</p>
                <p class="metodologia-texto" style="margin-top: 30px;"><strong>Fases del estudio:</strong><br>‚Ä¢ Fase 1: Observaci√≥n y registro (18 fichas publicadas)<br>‚Ä¢ Fase 2: An√°lisis descriptivo (pr√≥ximamente)<br>‚Ä¢ Fase 3: Comparaci√≥n con occidente</p>
                <p class="metodologia-texto" style="margin-top: 30px;">Comunidad: 30,500+ seguidores.</p>
            </div>
        </div>
        <div class="modal" id="modal" onclick="cerrarModal()">
            <span class="close-modal" onclick="cerrarModal()">&times;</span>
            <div class="modal-content" onclick="event.stopPropagation()">
                <img id="modal-img" src="" alt="Card">
            </div>
        </div>
        <div class="footer">
            <p>Estudio Etno-Ecol√≥gico de Nichos en Douyin 2026</p>
            <p>Juan Carlos Delgado ¬∑ Marzo 2026</p>
            <p id="footer-fichas">0 creadoras ¬∑ 30,500+ comunidad</p>
            <div style="margin:20px auto; max-width:500px; padding:12px; background:#1a1a1a; border-radius:8px; border-left:3px solid #ffaa00;">
                <p style="color:#ffaa00; font-weight:bold;">üì± VERSI√ìN M√ìVIL</p>
                <p style="color:#888; font-size:11px;">Optimizada para computadora. En m√≥vil, la galer√≠a se ve en 2 columnas, el mapa puede no cargar.</p>
            </div>
            <div style="margin-top:20px;">
                <img src="https://hitwebcounter.com/counter/counter.php?page=18466857&style=0038&nbdigits=6&type=page&initCount=0" alt="visitas">
            </div>
        </div>
    </div>

    <script src="fichas.js"></script>
    <script>
        if (typeof echarts === 'undefined') {
            console.error('‚ùå ECharts no carg√≥. Verifica tu conexi√≥n o CDN.');
        }
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            event.target.classList.add('active');
            if (sectionId === 'mapa') { setTimeout(() => { if (typeof echarts !== 'undefined' && typeof generarMapa === 'function') generarMapa(); }, 200); }
            if (sectionId === 'ranking') { setTimeout(() => { if (typeof echarts !== 'undefined' && typeof generarRanking === 'function') generarRanking(); }, 200); }
            if (sectionId === 'galeria') { setTimeout(() => { if (typeof actualizarPagina === 'function') actualizarPagina(); }, 200); }
        }
        function abrirModal(archivo) {
            const img = document.getElementById('modal-img');
            const modal = document.getElementById('modal');
            if (img && modal) {
                img.src = 'https://raw.githubusercontent.com/dicarlophotoart-blip/estudio-douyin-2026/main/cards/' + encodeURIComponent(archivo);
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            }
        }
        function cerrarModal() {
            const modal = document.getElementById('modal');
            if (modal) { modal.style.display = 'none'; document.body.style.overflow = 'auto'; }
        }
        document.addEventListener('keydown', function(e) { if (e.key === 'Escape') cerrarModal(); });
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Iniciando aplicaci√≥n...');
            console.log('üìä ECharts cargado:', typeof echarts !== 'undefined');
            if (typeof echarts !== 'undefined') {
                fetch('china.json')
                    .then(response => { if (!response.ok) throw new Error('HTTP ' + response.status); return response.json(); })
                    .then(chinaJson => {
                        echarts.registerMap('china', chinaJson);
                        console.log('‚úÖ Mapa registrado - Features:', chinaJson.features?.length);
                        if (document.getElementById('mapa')?.classList.contains('active')) {
                            setTimeout(() => { if (typeof generarMapa === 'function') generarMapa(); }, 300);
                        }
                    })
                    .catch(error => {
                        console.error('‚ùå Error cargando china.json:', error);
                        const mapDiv = document.getElementById('chinaMap');
                        if (mapDiv) {
                            mapDiv.innerHTML = '<div style="text-align:center;padding:80px 20px;color:#ffaa00;"><h3>‚ö†Ô∏è Error cargando mapa</h3><p>' + error.message + '</p><p style="margin-top:20px;font-size:12px;">Verifica que china.json est√° en la ra√≠z del repo</p></div>';
                        }
                    });
            } else {
                console.error('‚ùå ECharts no est√° disponible. El mapa y ranking no funcionar√°n.');
            }
        });
    </script>
</body>
</html>
